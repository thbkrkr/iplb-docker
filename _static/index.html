<!doctype html>
<html><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>IPLB Docker</title>
  <link rel="icon" href="/s/favicon.ico" type="image/gif">
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css">
</head><body>
<style>
.main {
  padding-top: 30px;
}
.footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  padding: 10px;
  text-align: center;
}
.footer a {
  color: #333;
}
</style>
<!-- begin:HTML -->
<div class="ui main center aligned container">

  <h2 class="ui header index">
    IPLB
  </h2>

  <!-- Frontends -->

  <h3 class="ui header index">
    frontends
  </h3>
  <div class="frontends">
    <div class="sixteen wide column">
      <table class="ui celled blue compact table">
        <thead>
          <tr>
            <th class="two wide">ID</th>
            <th class="two wide">Zone</th>
            <th class="two wide">Port</th>
            <th class="two wide">DefaultFarmId</th>
            <th class="two wide">DefaultSslId</th>
            <th class="two wide">SSL</th>
            <th class="two wide">HSTS</th>
          </tr>
        </thead>
        <tbody id="frontends">
          <tr><td>Loading...</td></tr>
        </tbody>
      </table>
    </div>
  </div>

   <script type="text/html" id="frontends_tpl">
    <% for (i = 0; i < obj.length; i++) { %>
    <tr>
        <td><%= obj[i].frontendId %></td>
        <td><%= obj[i].zone %></td>
        <td><%= obj[i].port %></td>
        <td><%= obj[i].defaultFarmId %></td>
        <td><%= obj[i].defaultSslId %></td>
        <td><%= obj[i].ssl %></td>
        <td><%= obj[i].hsts %></td>
    </tr>
    <% } %>
  </script>

  <!-- Route -->

  <h3 class="ui header index">
    routes
  </h3>
  <div class="routes">
    <div class="sixteen wide column">
      <table class="ui celled teal compact table">
        <thead>
          <tr>
            <th class="two wide">ID</th>
            <th class="two wide">Name</th>
            <th class="two wide">Action type</th>
            <th class="two wide">Action target</th>
            <th class="two wide">FrontendID</th>
            <th class="two wide">Status</th>
            <th class="two wide">Weight</th>
          </tr>
        </thead>
        <tbody id="routes">
          <tr><td>Loading...</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <script type="text/html" id="routes_tpl">
    <% for (i = 0; i < obj.length; i++) { %>
    <tr>
        <td><%= obj[i].routeId %></td>
        <td><%= obj[i].displayName %></td>
        <td><%= obj[i].action.type %></td>
        <td><%= obj[i].action.target %></td>
        <td><%= obj[i].frontendId %></td>
        <td><%= obj[i].status %></td>
        <td><%= obj[i].weight %></td>
    </tr>
      <% if (obj[i].rules) { %>
        <% for (j = 0; j < obj[i].rules.length; j++) { %>
    <tr>
        <td></td>
        <td></td>
        <td colspan=4>
          Rule <%= obj[i].rules[j].ruleId %>:
          <%= obj[i].rules[j].field %>
          <%= obj[i].rules[j].match %>
          <%= obj[i].rules[j].pattern %>
        </td>
        <td></td>
    </tr>
        <% } %>
      <% } %>
    <% } %>
  </script>

  <!-- Farms -->

  <h3 class="ui header index">
    http farms
  </h3>
  <div class="farms">
    <div class="sixteen wide column">
      <table class="ui celled pink compact table">
        <thead>
          <tr>
            <th class="two wide">ID</th>
            <th class="two wide">Name</th>
            <th class="two wide">Port</th>
            <th class="two wide">Zone</th>
            <th class="two wide">Probe</th>
          </tr>
        </thead>
        <tbody id="farms">
          <tr><td>Loading...</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <script type="text/html" id="farms_tpl">
    <% for (i = 0; i < obj.length; i++) { %>
    <tr>
        <td><%= obj[i].farmId %></td>
        <td><%= obj[i].displayName %></td>
        <td><%= obj[i].port %></td>
        <td><%= obj[i].zone %></td>
        <td><%= obj[i].probe %></td>
    </tr>
    <% } %>
  </script>

  <!-- Servers -->

  <h3 class="ui header index">
    servers
  </h3>
  <div class="servers">
    <div class="sixteen wide column">
      <table class="ui celled orange compact table">
        <thead>
          <tr>
            <th class="two wide">ID</th>
            <th class="two wide">Name</th>
            <th class="two wide">Address</th>
            <th class="two wide">Port</th>
            <th class="two wide">BackendID</th>
            <th class="two wide">Probe</th>
            <th class="two wide">SSL</th>
            <th class="two wide">Status</th>
            <th class="two wide">Weight</th>
          </tr>
        </thead>
        <tbody id="servers">
          <tr><td>Loading...</td></tr>
        </tbody>
      </table>
    </div>
  </div>

   <script type="text/html" id="servers_tpl">
    <% for (i = 0; i < obj.length; i++) { %>
    <tr>
        <td><%= obj[i].serverId %></td>
        <td><%= obj[i].displayName %></td>
        <td><%= obj[i].address %></td>
        <td><%= obj[i].port %></td>
        <td><%= obj[i].backendId %></td>
        <td><%= obj[i].probe %></td>
        <td><%= obj[i].ssl %></td>
        <td><%= obj[i].status %></td>
        <td><%= obj[i].weight %></td>
    </tr>
    <% } %>
  </script>

  <!-- SSL -->

  <h3 class="ui header index">
    ssls
  </h3>
  <div class="ssls">
    <div class="sixteen wide column">
      <table class="ui celled yellow compact table">
        <thead>
          <tr>
            <th class="two wide">ID</th>
            <th class="two wide">Type</th>
            <th class="two wide">Subject</th>
            <th class="two wide">Serial</th>
            <!-- <th class="two wide">Type</th>
            <th class="two wide">Fingerprint</th> -->
          </tr>
        </thead>
        <tbody id="ssls">
          <tr><td>Loading...</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <script type="text/html" id="ssls_tpl">
    <% for (i = 0; i < obj.length; i++) { %>
    <tr>
        <td><%= obj[i].id %></td>
        <!-- <td><%= obj[i].displayName %></td> -->
        <td><%= obj[i].type %></td>
        <td><%= obj[i].subject %></td>
        <td><%= obj[i].serial %></td>
        <!-- <td><%= obj[i].fingerprint %></td> -->
    </tr>
    <% } %>
  </script>

</div>

<!-- <div class="footer">
  <hr>
  <a href="https://api.ovh.com/console/#/ipLoadbalancing" target="_blank">OVH IPLB</a>
</div> -->
<br>
<br>
</body> <!-- end:HTML -->
<script src="//thbkrkr.github.io/s.js/dist/s.12.f0b0c00.z.js"></script><script>
/** begin:JS */

$get('/server', function(servers) {
  $('#servers').html($tpl('servers_tpl', servers))
})
$get('/farm', function(farms) {
  $('#farms').html($tpl('farms_tpl', farms))
})
$get('/frontend', function(frontends) {
  $('#frontends').html($tpl('frontends_tpl', frontends))
})
$get('/route', function(ssls) {
  $('#routes').html($tpl('routes_tpl', ssls))
})
$get('/ssl', function(ssls) {
  $('#ssls').html($tpl('ssls_tpl', ssls))
})



/** end:JS */
</script></body></html>